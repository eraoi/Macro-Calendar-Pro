<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Macro Calendar Pro</title>
    <style>
        body { margin: 0; padding: 0; background-color: #131722; color: #e0e3eb; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; height: 100vh; overflow: hidden; }
        
        .header {
            height: 50px;
            background-color: #1e222d;
            border-bottom: 1px solid #2a2e39;
            display: flex;
            align-items: center;
            padding: 0 20px;
            justify-content: space-between;
        }
        
        .header h1 { font-size: 18px; margin: 0; color: #f0b90b; font-weight: 600; }
        .header span { font-size: 12px; color: #787b86; margin-left: 10px; border-left: 1px solid #363a45; padding-left: 10px; }

        .lang-btn {
            background-color: #2a2e39; color: #d1d4dc; border: 1px solid #363a45;
            padding: 5px 12px; border-radius: 4px; cursor: pointer; font-size: 12px; font-weight: bold; transition: all 0.2s;
        }
        .lang-btn:hover { background-color: #363a45; color: #fff; border-color: #f0b90b; }

        .main-container { display: flex; height: calc(100vh - 50px); }

        /* å·¦ä¾§ï¼šæ—¥å† */
        .calendar-section { flex: 3; border-right: 1px solid #2a2e39; position: relative; }

        /* å³ä¾§ï¼šæ·±åº¦åˆ†æ */
        .cheat-sheet {
            flex: 1.2; /* ç¨å¾®åŠ å®½å³ä¾§ */
            padding: 0;
            background-color: #131722;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .scroll-content { padding: 20px; }

        .section-title {
            font-size: 15px; color: #f0b90b; margin-bottom: 15px; border-bottom: 1px solid #2a2e39; padding-bottom: 8px; font-weight: bold;
            display: flex; justify-content: space-between; align-items: center;
        }

        .cheat-card {
            background: #1e222d; border: 1px solid #2a2e39; border-radius: 6px; padding: 15px; margin-bottom: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .cheat-card h3 { margin: 0 0 8px 0; font-size: 14px; color: #fff; display: flex; justify-content: space-between; }
        .cheat-card p { margin: 0 0 6px 0; font-size: 13px; color: #b2b5be; line-height: 1.5; }
        
        /* å†å²æ³¢åŠ¨æ ‡ç­¾ */
        .volatility-tag {
            font-size: 11px; background: #2a2e39; padding: 2px 6px; border-radius: 3px; color: #9db2bf; border: 1px solid #363a45;
        }
        
        .impact-box {
            background: #131722; border-radius: 4px; padding: 10px; margin-top: 10px; border: 1px solid #2a2e39;
        }
        .impact-title { font-size: 12px; color: #787b86; margin-bottom: 5px; font-weight: bold; }
        .impact-row { display: flex; justify-content: space-between; font-size: 12px; margin-bottom: 4px; }

        .bullish { color: #089981; font-weight: bold; }
        .bearish { color: #f23645; font-weight: bold; }
        .neutral { color: #f0b90b; font-weight: bold; }
        .highlight { color: #e0e3eb; font-weight: bold; }

        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #131722; }
        ::-webkit-scrollbar-thumb { background: #363a45; border-radius: 3px; }
    </style>
</head>
<body>

    <div class="header">
        <div style="display:flex; align-items:center;">
            <h1 id="txt-title">Macro Calendar Pro</h1>
            <span id="txt-timezone">ğŸ•’ æ—¶é—´å·²é”å®šï¼šåŒ—äº¬æ—¶é—´ (UTC+8)</span>
        </div>
        <button class="lang-btn" onclick="toggleLanguage()">ğŸŒ EN / CN</button>
    </div>

    <div class="main-container">
        <!-- å·¦ä¾§æ—¥å† -->
        <div class="calendar-section">
            <div class="tradingview-widget-container" id="tv-widget-box" style="width: 100%; height: 100%;"></div>
        </div>

        <!-- å³ä¾§æ·±åº¦é€»è¾‘ -->
        <div class="cheat-sheet">
            <div class="scroll-content">
                
                <div class="section-title">
                    <span id="txt-sec-critical">ğŸ”¥ æ ¸å¿ƒå®è§‚äº‹ä»¶ (Tier 1)</span>
                </div>

                <!-- CPI æ·±åº¦å¡ç‰‡ -->
                <div class="cheat-card">
                    <h3>
                        <span id="t-cpi">ğŸ‡ºğŸ‡¸ CPI é€šèƒ€æ•°æ®</span>
                        <span class="volatility-tag" id="v-cpi">æ³¢åŠ¨: High</span>
                    </h3>
                    <p id="d-cpi">ç¾è”å‚¨å†³ç­–çš„åŸºçŸ³ã€‚å†³å®šæ˜¯"åŠ æ¯"è¿˜æ˜¯"é™æ¯"ã€‚</p>
                    <div class="impact-box">
                        <div class="impact-title" id="h-cpi-hist">ğŸ“Š å†å²æ³¢åŠ¨ (è¿‡å»5æ¬¡å¹³å‡)</div>
                        <div class="impact-row"><span>1m Candle:</span> <span class="highlight">Â±1.5% - 2.5%</span></div>
                        <div class="impact-row"><span>Daily Range:</span> <span class="highlight">Â±4.0% - 6.0%</span></div>
                    </div>
                    <hr style="border:0; border-top:1px solid #363a45; margin:10px 0;">
                    <p><span id="res-cpi-high">é«˜äºé¢„æœŸ > 0.2%:</span> <span class="bearish">Crash (åˆ©ç©º)</span></p>
                    <p><span id="res-cpi-low">ä½äºé¢„æœŸ > 0.2%:</span> <span class="bullish">Pump (åˆ©å¤š)</span></p>
                    <p style="font-size:12px; color:#f0b90b; margin-top:5px;" id="note-cpi">âš ï¸ æ³¨æ„ï¼šå¦‚æœå‘å¸ƒå€¼ä¸é¢„æµ‹å€¼ä¸€è‡´ï¼Œé€šå¸¸ä¼š"åˆ©å¤šè½åœ°"è½¬è·Œã€‚</p>
                </div>

                <!-- NFP æ·±åº¦å¡ç‰‡ -->
                <div class="cheat-card">
                    <h3>
                        <span id="t-nfp">ğŸ‡ºğŸ‡¸ NFP éå†œå°±ä¸š</span>
                        <span class="volatility-tag" id="v-nfp">æ³¢åŠ¨: High</span>
                    </h3>
                    <p id="d-nfp">ä¹Ÿæ˜¯"éª—çº¿"ä¹‹ç‹ã€‚éœ€ç»“åˆå¤±ä¸šç‡ä¸€èµ·çœ‹ã€‚</p>
                    <div class="impact-box">
                        <div class="impact-title" id="h-nfp-logic">ğŸ§  äº¤æ˜“å‘˜é˜ˆå€¼é€»è¾‘</div>
                        <div class="impact-row"><span>< 100k:</span> <span class="bearish" id="nfp-recession">è¡°é€€ææ…Œ (BTC è·Œ)</span></div>
                        <div class="impact-row"><span>150k - 250k:</span> <span class="neutral" id="nfp-goldilocks">é‡‘å‘å§‘å¨˜ (éœ‡è¡å‘ä¸Š)</span></div>
                        <div class="impact-row"><span>> 300k:</span> <span class="bearish" id="nfp-hot">ç»æµè¿‡çƒ­/åŠ æ¯ (BTC è·Œ)</span></div>
                    </div>
                    <p style="font-size:12px; color:#888; margin-top:5px;" id="note-nfp">ğŸ’¡ æç¤ºï¼šNFP å…¬å¸ƒåçš„ç¬¬ä¸€æ ¹ 1åˆ†é’Ÿ Kçº¿é€šå¸¸æ˜¯å‡åŠ¨ä½œã€‚</p>
                </div>

                <!-- FOMC æ·±åº¦å¡ç‰‡ -->
                <div class="cheat-card">
                    <h3>
                        <span id="t-fomc">ğŸ›ï¸ FOMC åˆ©ç‡å†³è®®</span>
                        <span class="volatility-tag" id="v-fomc">æ³¢åŠ¨: Extreme</span>
                    </h3>
                    <p id="d-fomc">åŒ…å«ï¼šå†³è®®(2:00) + ç‚¹é˜µå›¾ + é²å¨å°”è®²è¯(2:30)ã€‚</p>
                    <div class="impact-box">
                        <div class="impact-title" id="h-fomc-dot">ğŸ“‰ ç‚¹é˜µå›¾ (Dot Plot) æ‰æ˜¯é‡ç‚¹</div>
                        <p style="font-size:12px; color:#b2b5be;" id="exp-dot">ä¸è¦åªçœ‹å½“ä¸‹åŠ ä¸åŠ æ¯ï¼Œè¦çœ‹å®˜å‘˜å¯¹"å¹´åº•åˆ©ç‡"çš„é¢„æµ‹ä¸­ä½æ•°æ˜¯ä¸Šç§»è¿˜æ˜¯ä¸‹ç§»ã€‚</p>
                    </div>
                    <hr style="border:0; border-top:1px solid #363a45; margin:10px 0;">
                    <p><span id="res-hawk">é¹°æ´¾å‘è¨€:</span> <span class="bearish">USD æ¶¨ / BTC è·Œ</span></p>
                    <p><span id="res-dove">é¸½æ´¾å‘è¨€:</span> <span class="bullish">USD è·Œ / BTC æ¶¨</span></p>
                </div>

                <div class="section-title">
                    <span id="txt-sec-special">âš¡ ç‰¹æ®Šå½¢æ€æé†’</span>
                </div>

                <!-- Super Week -->
                <div class="cheat-card" style="border-left: 3px solid #f0b90b;">
                    <h3><span id="t-super">ğŸ’£ è¶…çº§å‘¨ (Super Week)</span></h3>
                    <p id="d-super">å®šä¹‰ï¼šå½“ CPI (å‘¨äºŒ) å’Œ FOMC (å‘¨ä¸‰) åœ¨åŒä¸€å‘¨ã€‚</p>
                    <p style="margin-top:5px;"><span class="neutral" id="adv-super">ç­–ç•¥ï¼šå…¨å‘¨é™ä½æ æ†ï¼Œä¸åšæ—¥å†…æ³¢æ®µã€‚ç­‰å¾…å‘¨å››è¶‹åŠ¿æ˜æœ—ã€‚</span></p>
                </div>

                <!-- PPI & Jobless -->
                <div class="cheat-card">
                    <h3><span id="t-ppi">PPI & åˆè¯·å¤±ä¸šé‡‘</span></h3>
                    <p id="d-ppi">é€šå¸¸å‘¨å››æ™šå…¬å¸ƒã€‚é‡è¦æ€§æ¬¡äº CPIï¼Œä½†å¦‚æœ CPI æ²¡æ–¹å‘ï¼ŒPPI ä¼šè¡¥åˆ€ã€‚</p>
                </div>

                <p id="txt-footer" style="font-size:11px; color:#555; text-align:center; margin-top:20px;">
                    æ•°æ®æ³¢åŠ¨ä»…ä¾›å‚è€ƒã€‚å¸‚åœºæ°¸è¿œæ˜¯å¯¹çš„ã€‚<br>Always DYOR.
                </p>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        let currentLang = 'zh';

        const i18n = {
            zh: {
                title: "Macro Calendar Pro",
                timezone: "ğŸ•’ æ—¶é—´å·²é”å®šï¼šåŒ—äº¬æ—¶é—´ (UTC+8)",
                secCritical: "ğŸ”¥ æ ¸å¿ƒå®è§‚äº‹ä»¶ (Tier 1)",
                secSpecial: "âš¡ ç‰¹æ®Šå½¢æ€æé†’",
                
                // CPI
                tCpi: "ğŸ‡ºğŸ‡¸ CPI é€šèƒ€æ•°æ®",
                vCpi: "æ³¢åŠ¨: é«˜",
                dCpi: "ç¾è”å‚¨å†³ç­–çš„åŸºçŸ³ã€‚å†³å®šæ˜¯'åŠ æ¯'è¿˜æ˜¯'é™æ¯'ã€‚",
                hCpiHist: "ğŸ“Š å†å²æ³¢åŠ¨ (è¿‡å»5æ¬¡å¹³å‡)",
                resCpiHigh: "é«˜äºé¢„æœŸ > 0.2%:",
                resCpiLow: "ä½äºé¢„æœŸ > 0.2%:",
                noteCpi: "âš ï¸ æ³¨æ„ï¼šå¦‚æœå‘å¸ƒå€¼ä¸é¢„æµ‹å€¼ä¸€è‡´ï¼Œé€šå¸¸ä¼š'åˆ©å¤šè½åœ°'è½¬è·Œã€‚",

                // NFP
                tNfp: "ğŸ‡ºğŸ‡¸ NFP éå†œå°±ä¸š",
                vNfp: "æ³¢åŠ¨: é«˜",
                dNfp: "ä¹Ÿæ˜¯'éª—çº¿'ä¹‹ç‹ã€‚éœ€ç»“åˆå¤±ä¸šç‡ä¸€èµ·çœ‹ã€‚",
                hNfpLogic: "ğŸ§  äº¤æ˜“å‘˜é˜ˆå€¼é€»è¾‘",
                nfpRecession: "è¡°é€€ææ…Œ (BTC è·Œ)",
                nfpGoldilocks: "é‡‘å‘å§‘å¨˜ (éœ‡è¡å‘ä¸Š)",
                nfpHot: "ç»æµè¿‡çƒ­/åŠ æ¯ (BTC è·Œ)",
                noteNfp: "ğŸ’¡ æç¤ºï¼šNFP å…¬å¸ƒåçš„ç¬¬ä¸€æ ¹ 1åˆ†é’Ÿ Kçº¿é€šå¸¸æ˜¯å‡åŠ¨ä½œã€‚",

                // FOMC
                tFomc: "ğŸ›ï¸ FOMC åˆ©ç‡å†³è®®",
                vFomc: "æ³¢åŠ¨: æé«˜",
                dFomc: "åŒ…å«ï¼šå†³è®®(2:00) + ç‚¹é˜µå›¾ + é²å¨å°”è®²è¯(2:30)ã€‚",
                hFomcDot: "ğŸ“‰ ç‚¹é˜µå›¾ (Dot Plot) æ‰æ˜¯é‡ç‚¹",
                expDot: "ä¸è¦åªçœ‹å½“ä¸‹åŠ ä¸åŠ æ¯ï¼Œè¦çœ‹å®˜å‘˜å¯¹'å¹´åº•åˆ©ç‡'çš„é¢„æµ‹ä¸­ä½æ•°æ˜¯ä¸Šç§»è¿˜æ˜¯ä¸‹ç§»ã€‚",
                resHawk: "é¹°æ´¾å‘è¨€:",
                resDove: "é¸½æ´¾å‘è¨€:",

                // Super Week & Others
                tSuper: "ğŸ’£ è¶…çº§å‘¨ (Super Week)",
                dSuper: "å®šä¹‰ï¼šå½“ CPI (å‘¨äºŒ) å’Œ FOMC (å‘¨ä¸‰) åœ¨åŒä¸€å‘¨ã€‚",
                advSuper: "ç­–ç•¥ï¼šå…¨å‘¨é™ä½æ æ†ï¼Œä¸åšæ—¥å†…æ³¢æ®µã€‚ç­‰å¾…å‘¨å››è¶‹åŠ¿æ˜æœ—ã€‚",
                tPpi: "PPI & åˆè¯·å¤±ä¸šé‡‘",
                dPpi: "é€šå¸¸å‘¨å››æ™šå…¬å¸ƒã€‚é‡è¦æ€§æ¬¡äº CPIï¼Œä½†å¦‚æœ CPI æ²¡æ–¹å‘ï¼ŒPPI ä¼šè¡¥åˆ€ã€‚",

                footer: "æ•°æ®æ³¢åŠ¨ä»…ä¾›å‚è€ƒã€‚å¸‚åœºæ°¸è¿œæ˜¯å¯¹çš„ã€‚\nAlways DYOR."
            },
            en: {
                title: "Macro Calendar Pro",
                timezone: "ğŸ•’ Timezone: Beijing (UTC+8)",
                secCritical: "ğŸ”¥ Tier 1 Events",
                secSpecial: "âš¡ Special Patterns",

                // CPI
                tCpi: "ğŸ‡ºğŸ‡¸ CPI Inflation",
                vCpi: "Vol: High",
                dCpi: "Foundation of Fed policy. Decides Hike vs Cut.",
                hCpiHist: "ğŸ“Š Avg Volatility (Last 5 events)",
                resCpiHigh: "Higher > 0.2%:",
                resCpiLow: "Lower > 0.2%:",
                noteCpi: "âš ï¸ Note: Matching forecast often leads to 'Sell the News'.",

                // NFP
                tNfp: "ğŸ‡ºğŸ‡¸ NFP Payrolls",
                vNfp: "Vol: High",
                dNfp: "King of 'Fake-outs'. Must watch Unemployment Rate too.",
                hNfpLogic: "ğŸ§  Trader's Thresholds",
                nfpRecession: "Recession Fear (Dump)",
                nfpGoldilocks: "Goldilocks (Grind Up)",
                nfpHot: "Too Hot / Hike Risk (Dump)",
                noteNfp: "ğŸ’¡ Tip: The first 1-min candle after NFP is usually a fake move.",

                // FOMC
                tFomc: "ğŸ›ï¸ FOMC Rate Decision",
                vFomc: "Vol: Extreme",
                dFomc: "Includes: Decision + Dot Plot + Powell Speech.",
                hFomcDot: "ğŸ“‰ The 'Dot Plot' is Key",
                expDot: "Ignore the current hike. Look at the median forecast for Year-End rates.",
                resHawk: "Hawkish Speech:",
                resDove: "Dovish Speech:",

                // Super Week
                tSuper: "ğŸ’£ Super Week",
                dSuper: "Definition: When CPI (Tue) and FOMC (Wed) align.",
                advSuper: "Strategy: De-leverage all week. Wait for Thursday trend.",
                tPpi: "PPI & Jobless Claims",
                dPpi: "Thu Nights. Tier 2, but moves market if CPI was neutral.",

                footer: "Volatility stats for reference only. Market is always right.\nAlways DYOR."
            }
        };

        function updateWidget(langCode) {
            const container = document.getElementById('tv-widget-box');
            container.innerHTML = ''; 

            const div = document.createElement('div');
            div.className = 'tradingview-widget-container__widget';
            container.appendChild(div);

            const script = document.createElement('script');
            script.type = 'text/javascript';
            script.src = 'https://s3.tradingview.com/external-embedding/embed-widget-events.js';
            script.async = true;
            
            const locale = langCode === 'zh' ? 'zh_CN' : 'en';

            script.innerHTML = JSON.stringify({
                "colorTheme": "dark",
                "isTransparent": true,
                "width": "100%",
                "height": "100%",
                "locale": locale,
                "importanceFilter": "0,1", 
                "countryFilter": "us,eu,cn,jp,gb",
                "timezone": "Asia/Shanghai" // å¼ºåˆ¶åŒ—äº¬æ—¶é—´
            });
            container.appendChild(script);
        }

        function toggleLanguage() {
            currentLang = currentLang === 'zh' ? 'en' : 'zh';
            const t = i18n[currentLang];

            // Update UI Text
            const ids = [
                ['txt-title', 'title'], ['txt-timezone', 'timezone'], ['txt-sec-critical', 'secCritical'], ['txt-sec-special', 'secSpecial'],
                ['t-cpi', 'tCpi'], ['v-cpi', 'vCpi'], ['d-cpi', 'dCpi'], ['h-cpi-hist', 'hCpiHist'], ['res-cpi-high', 'resCpiHigh'], ['res-cpi-low', 'resCpiLow'], ['note-cpi', 'noteCpi'],
                ['t-nfp', 'tNfp'], ['v-nfp', 'vNfp'], ['d-nfp', 'dNfp'], ['h-nfp-logic', 'hNfpLogic'], ['nfp-recession', 'nfpRecession'], ['nfp-goldilocks', 'nfpGoldilocks'], ['nfp-hot', 'nfpHot'], ['note-nfp', 'noteNfp'],
                ['t-fomc', 'tFomc'], ['v-fomc', 'vFomc'], ['d-fomc', 'dFomc'], ['h-fomc-dot', 'hFomcDot'], ['exp-dot', 'expDot'], ['res-hawk', 'resHawk'], ['res-dove', 'resDove'],
                ['t-super', 'tSuper'], ['d-super', 'dSuper'], ['adv-super', 'advSuper'], ['t-ppi', 'tPpi'], ['d-ppi', 'dPpi'], ['txt-footer', 'footer']
            ];

            ids.forEach(pair => {
                const el = document.getElementById(pair[0]);
                if(el) el.innerText = t[pair[1]];
            });

            updateWidget(currentLang);
        }

        updateWidget('zh');
    </script>
</body>
</html>